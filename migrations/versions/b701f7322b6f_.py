from alembic import op
import sqlalchemy as sa


# Identifiers used by Alembic with generated codes (script.py.mako)
revision = "b701f7322b6f"
down_revision = "b29522cb896e"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('document_hist', 'deleted')
    op.add_column('user_info', sa.Column('last_auth', sa.DateTime(), server_default=sa.text("timezone('UTC'::text, CURRENT_TIMESTAMP)"), nullable=False))
    op.drop_column('user_info', 'name')
    op.drop_column('user_info', 'ldap_cn')
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('user_info', sa.Column('ldap_cn', sa.VARCHAR(), autoincrement=False, nullable=False))
    op.add_column('user_info', sa.Column('name', sa.VARCHAR(), autoincrement=False, nullable=False))
    op.drop_column('user_info', 'last_auth')
    op.add_column('document_hist', sa.Column('deleted', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=True))
    # ### end Alembic commands ###
